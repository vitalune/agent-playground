<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Julia Set Explorer</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Courier New', monospace;
            background: #000;
            color: #fff;
            overflow: hidden;
        }

        @keyframes glow {
            0%, 100% { box-shadow: 0 0 20px rgba(255, 0, 255, 0.5); }
            50% { box-shadow: 0 0 30px rgba(255, 0, 255, 0.8); }
        }

        .container {
            position: relative;
            width: 100vw;
            height: 100vh;
            background: #000;
        }

        canvas {
            display: block;
            cursor: crosshair;
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: #000;
        }

        .controls {
            position: absolute;
            top: 20px;
            left: 20px;
            background: rgba(0, 0, 0, 0.95);
            padding: 20px;
            border-radius: 10px;
            border: 2px solid #f0f;
            animation: glow 2s ease-in-out infinite;
            z-index: 100;
        }

        .controls h1 {
            color: #f0f;
            margin-bottom: 15px;
            font-size: 1.5em;
            text-shadow: 0 0 10px #f0f;
        }

        .control-group {
            margin: 10px 0;
        }

        .control-group label {
            display: block;
            margin-bottom: 5px;
            color: #f0f;
            font-size: 0.9em;
        }

        .control-group input[type="range"] {
            width: 180px;
        }

        .control-group button {
            background: #f0f;
            color: #000;
            border: none;
            padding: 8px 16px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
            font-family: 'Courier New', monospace;
            font-weight: bold;
            transition: all 0.3s;
        }

        .control-group button:hover {
            background: #fff;
            box-shadow: 0 0 15px #f0f;
        }

        .presets {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 5px;
            margin-top: 10px;
        }

        .presets button {
            font-size: 0.8em;
            padding: 6px 10px;
        }

        .nav-links {
            position: absolute;
            bottom: 20px;
            left: 20px;
            display: flex;
            gap: 10px;
            z-index: 100;
        }

        .nav-links a {
            background: rgba(0, 0, 0, 0.95);
            color: #0ff;
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 5px;
            border: 2px solid #0ff;
            font-weight: bold;
            transition: all 0.3s;
            text-shadow: 0 0 5px #0ff;
        }

        .nav-links a:hover {
            background: #0ff;
            color: #000;
            box-shadow: 0 0 15px #0ff;
            text-shadow: none;
        }

        .info {
            position: absolute;
            top: 20px;
            right: 20px;
            background: rgba(0, 0, 0, 0.95);
            padding: 15px;
            border-radius: 10px;
            border: 2px solid #ff0;
            max-width: 250px;
            z-index: 100;
        }

        .info p {
            color: #ff0;
            font-size: 0.85em;
            margin: 5px 0;
        }
    </style>
</head>
<body>
    <div class="container">
        <canvas id="juliaCanvas"></canvas>

        <div class="controls">
            <h1>JULIA SET EXPLORER</h1>
            <div class="control-group">
                <label>C Real: <span id="cRealValue">-0.70</span></label>
                <input type="range" id="cReal" min="-1.5" max="1.5" step="0.01" value="-0.70">
            </div>
            <div class="control-group">
                <label>C Imag: <span id="cImagValue">0.27</span></label>
                <input type="range" id="cImag" min="-1.5" max="1.5" step="0.01" value="0.27">
            </div>
            <div class="control-group">
                <label>Max Iterations: <span id="iterValue">150</span></label>
                <input type="range" id="iterations" min="50" max="500" value="150">
            </div>
            <div class="control-group">
                <button id="animateBtn">Animate C</button>
            </div>
            <div class="presets">
                <button onclick="loadPreset(-0.70, 0.27)">Spiral</button>
                <button onclick="loadPreset(-0.8, 0.156)">Dendrite</button>
                <button onclick="loadPreset(0.285, 0.01)">Douady</button>
                <button onclick="loadPreset(-0.4, 0.6)">Dragon</button>
            </div>
        </div>

        <div class="info">
            <p>Julia sets are cousins of Mandelbrot</p>
            <p>C = <span id="cDisplay">-0.70 + 0.27i</span></p>
            <p>Try the presets!</p>
        </div>

        <div class="nav-links">
            <a href="index.html">Mandelbrot</a>
            <a href="lsystem.html">L-Systems</a>
            <a href="../index.html">Hub</a>
        </div>
    </div>

    <script>
        const canvas = document.getElementById('juliaCanvas');
        const ctx = canvas.getContext('2d');

        canvas.width = window.innerWidth;
        canvas.height = window.innerHeight;

        let cReal = -0.70;
        let cImag = 0.27;
        let maxIterations = 150;
        let isAnimating = false;
        let animationAngle = 0;

        const cRealSlider = document.getElementById('cReal');
        const cImagSlider = document.getElementById('cImag');
        const iterSlider = document.getElementById('iterations');
        const animateBtn = document.getElementById('animateBtn');

        cRealSlider.addEventListener('input', (e) => {
            cReal = parseFloat(e.target.value);
            document.getElementById('cRealValue').textContent = cReal.toFixed(2);
            updateCDisplay();
            render();
        });

        cImagSlider.addEventListener('input', (e) => {
            cImag = parseFloat(e.target.value);
            document.getElementById('cImagValue').textContent = cImag.toFixed(2);
            updateCDisplay();
            render();
        });

        iterSlider.addEventListener('input', (e) => {
            maxIterations = parseInt(e.target.value);
            document.getElementById('iterValue').textContent = maxIterations;
            render();
        });

        animateBtn.addEventListener('click', () => {
            isAnimating = !isAnimating;
            animateBtn.textContent = isAnimating ? 'Stop Animation' : 'Animate C';
            if (isAnimating) animate();
        });

        function loadPreset(real, imag) {
            cReal = real;
            cImag = imag;
            cRealSlider.value = real;
            cImagSlider.value = imag;
            document.getElementById('cRealValue').textContent = real.toFixed(2);
            document.getElementById('cImagValue').textContent = imag.toFixed(2);
            updateCDisplay();
            render();
        }

        window.loadPreset = loadPreset;

        function updateCDisplay() {
            const sign = cImag >= 0 ? '+' : '';
            document.getElementById('cDisplay').textContent =
                `${cReal.toFixed(2)} ${sign} ${cImag.toFixed(2)}i`;
        }

        function julia(zx, zy) {
            let x = zx;
            let y = zy;
            let iteration = 0;

            while (x*x + y*y <= 4 && iteration < maxIterations) {
                const xTemp = x*x - y*y + cReal;
                y = 2*x*y + cImag;
                x = xTemp;
                iteration++;
            }

            return iteration;
        }

        function getColor(iteration) {
            if (iteration === maxIterations) {
                return [0, 0, 0];
            }

            const smooth = iteration + 1 - Math.log(Math.log(2)) / Math.log(2);
            const hue = (smooth * 15 + 200) % 360;
            const saturation = 100;
            const lightness = 50 + 25 * Math.sin(smooth * 0.3);

            return hslToRgb(hue, saturation, lightness);
        }

        function hslToRgb(h, s, l) {
            s /= 100;
            l /= 100;
            const k = n => (n + h / 30) % 12;
            const a = s * Math.min(l, 1 - l);
            const f = n => l - a * Math.max(-1, Math.min(k(n) - 3, Math.min(9 - k(n), 1)));
            return [Math.floor(255 * f(0)), Math.floor(255 * f(8)), Math.floor(255 * f(4))];
        }

        function render() {
            ctx.fillStyle = '#000';
            ctx.fillRect(0, 0, canvas.width, canvas.height);

            const imageData = ctx.createImageData(canvas.width, canvas.height);
            const zoom = 2;

            for (let px = 0; px < canvas.width; px++) {
                for (let py = 0; py < canvas.height; py++) {
                    const x0 = (px / canvas.width - 0.5) * 4 / zoom;
                    const y0 = (py / canvas.height - 0.5) * 4 / zoom;

                    const iteration = julia(x0, y0);
                    const [r, g, b] = getColor(iteration);

                    const index = (py * canvas.width + px) * 4;
                    imageData.data[index] = r;
                    imageData.data[index + 1] = g;
                    imageData.data[index + 2] = b;
                    imageData.data[index + 3] = 255;
                }
            }

            ctx.putImageData(imageData, 0, 0);
        }

        function animate() {
            if (!isAnimating) return;

            animationAngle += 0.02;
            cReal = 0.7885 * Math.cos(animationAngle);
            cImag = 0.7885 * Math.sin(animationAngle);

            cRealSlider.value = cReal;
            cImagSlider.value = cImag;
            document.getElementById('cRealValue').textContent = cReal.toFixed(2);
            document.getElementById('cImagValue').textContent = cImag.toFixed(2);
            updateCDisplay();

            render();
            requestAnimationFrame(animate);
        }

        window.addEventListener('resize', () => {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            render();
        });

        updateCDisplay();
        render();
    </script>
</body>
</html>
